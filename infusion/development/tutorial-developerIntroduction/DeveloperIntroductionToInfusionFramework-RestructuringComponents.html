<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Developer Introduction to the Infusion Framework - Restructuring Components | Fluid Infusion</title>

        <link rel="stylesheet" href="../lib/foundation/normalize.css">
        <link rel="stylesheet" href="../lib/foundation/foundation.css">
        <link rel="stylesheet" href="../css/highlightjs-custom.css">
        <link rel="stylesheet" href="../lib/octicons/octicons.css">

        <link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/Enactors.css" />
        <link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/PrefsEditor.css" />
        <link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/SeparatedPanelPrefsEditor.css" />
        <link rel="stylesheet" href="../css/infusion-docs.css">

        <link rel="icon" type="image/png" href="../images/favico.png">

        <script type="text/javascript" src="../lib/infusion/dist/infusion-all.js"></script>
        <script type="text/javascript" src="../js/infusion-docs.js"></script>

        <script type="text/javascript" src="../lib/gpii-express/querystring-coding.js"></script>
        <script type="text/javascript" src="../lib/gpii-binder/transforms.js"></script>
        <script type="text/javascript" src="../lib/gpii-binder/binder.js"></script>

        
            <script type="text/javascript" src="../js/mini-search.js"></script>
        
    </head>
    <body class="infusion-docs fl-theme-prefsEditor-default">
        <div class="container infusion-docs-container">

            <!-- Skip Link -->
            <div id="skip">
                <a href="#tableOfContents">Jump to Table of Contents</a>
                <a href="#content">Skip to Content</a>
            </div>
            <!-- END skip link -->

            <!-- BEGIN markup for Preference Editor -->
            <div class="flc-prefsEditor-separatedPanel fl-prefsEditor-separatedPanel">
                <!-- This is the div that will contain the Preference Editor component -->
                <div class="flc-slidingPanel-panel flc-prefsEditor-iframe"></div>

                <!-- This div is for the sliding panel that shows and hides the Preference Editor controls -->
                <div class="fl-panelBar">
                    <span class="fl-prefsEditor-buttons">
                        <button id="reset" class="flc-prefsEditor-reset fl-prefsEditor-reset"><span class="fl-icon-undo"></span> Reset</button>
                        <button id="show-hide" class="flc-slidingPanel-toggleButton fl-prefsEditor-showHide">+ Show Display Preferences</button>
                    </span>
                </div>
            </div>

            <script type="text/javascript">
                fluid.uiOptions.prefsEditor(".flc-prefsEditor-separatedPanel", {
                    terms: {
                        "templatePrefix": "../lib/infusion/src/framework/preferences/html",
                        "messagePrefix": "../lib/infusion/src/framework/preferences/messages"
                    },
                    "tocTemplate": "../lib/infusion/TableOfContents.html"
                });
            </script>

            <!-- END markup for Preference Editor -->

            <header class="row infusion-docs-header">
                <div class="infusion-docs-fluidLogo small-12 medium-3 column">
                    <a class="infusion-docs-fluidLogoText" href="../index.html" title="Infusion">infusion</a>
                </div>

                <nav class="infusion-docs-fluidCategories small-12 medium-9 column">
                    
                    
                        
                            <a href="../index.html" title="Infusion">Infusion</a>
                        
                    
                        
                            <a href="../index-tutorials.html" title="Tutorials" class="infusion-docs-category-active">Tutorials</a>
                        
                    
                        
                            <a href="../index-components.html" title="Components">Components</a>
                        
                    
                        
                            <a href="../search.html" title="Search">Search</a>
                        
                    
                </nav>
            </header>

            <div class="infusion-docs-mainBody">
                <nav id="tableOfContents" class="infusion-docs-TOC small-12 medium-3 column" tabindex="-1">
                    
                        <span class="infusion-docs-category">Search</span>
                        <p class="docs-search-mini"><input type="text" name="qs"/></p>

                        
                        
                            
                        
                        
                            
                                <span class="infusion-docs-category">Tutorials</span>
                                
                                    <span class="infusion-docs-sectionName">Developer Introduction to the Infusion Framework</span>
                                    <ul>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-OpeningRemarks.html"><span class="infusion-docs-TOC-pageName">Opening Remarks</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-Components.html"><span class="infusion-docs-TOC-pageName">Components</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-Invokers.html"><span class="infusion-docs-TOC-pageName">Invokers</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-EventsAndInversionOfControl.html"><span class="infusion-docs-TOC-pageName">Events and Inversion of Control</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-ModelsAndModelComponents.html"><span class="infusion-docs-TOC-pageName">Models and Model Components</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-ViewsAndViewComponents.html"><span class="infusion-docs-TOC-pageName">Views and View Components</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-SubcomponentsAndModelRelaying.html"><span class="infusion-docs-TOC-pageName">Subcomponents and Model Relaying</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <span class="infusion-docs-TOC-pageName">Restructuring Components</span>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-OverridingInvokersAndRefactoring.html"><span class="infusion-docs-TOC-pageName">Overriding Invokers and Refactoring</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-ExtendingDesignsWithExistingComponents.html"><span class="infusion-docs-TOC-pageName">Extending Designs with Existing Components</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-TransformingModelRelays.html"><span class="infusion-docs-TOC-pageName">Transforming Model Relays</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="DeveloperIntroductionToInfusionFramework-ConcludingRemarks.html"><span class="infusion-docs-TOC-pageName">Concluding Remarks</span></a>
                                                
                                            </li>
                                        
                                    </ul>
                                
                                    <span class="infusion-docs-sectionName">Getting Started with Infusion Component Design</span>
                                    <ul>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/GettingStartedWithInfusion.html"><span class="infusion-docs-TOC-pageName">Getting Started with Infusion Component Design</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/SetUpYourEnvironment.html"><span class="infusion-docs-TOC-pageName">Set up your environment</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/DefineANamespaceAndCreateAClosure.html"><span class="infusion-docs-TOC-pageName">Define a namespace and create a closure</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/PickAComponentType.html"><span class="infusion-docs-TOC-pageName">Pick a component type</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/BasicComponentCreation-Components.html"><span class="infusion-docs-TOC-pageName">Basic Component Creation</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/ModelComponents.html"><span class="infusion-docs-TOC-pageName">Model Components</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/ViewComponents.html"><span class="infusion-docs-TOC-pageName">View Components</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/RendererComponents.html"><span class="infusion-docs-TOC-pageName">Renderer Components</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-gettingStartedWithInfusion/Subcomponents.html"><span class="infusion-docs-TOC-pageName">Subcomponents</span></a>
                                                
                                            </li>
                                        
                                    </ul>
                                
                                    <span class="infusion-docs-sectionName">General</span>
                                    <ul>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-usingStringTemplates/UsingStringTemplates.html"><span class="infusion-docs-TOC-pageName">Using String Templates</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-iconFonts/HowToCreateAndUseFontIcons.html"><span class="infusion-docs-TOC-pageName">How to Create and Use Font Icons</span></a>
                                                
                                            </li>
                                        
                                    </ul>
                                
                                    <span class="infusion-docs-sectionName">Preferences Framework</span>
                                    <ul>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-prefsFramework/CreatingAPrefsEditor.html"><span class="infusion-docs-TOC-pageName">Creating a Preference Editor</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-prefsFramework/CreatingEnactors.html"><span class="infusion-docs-TOC-pageName">Creating Enactors</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-prefsFramework/InstantiatingTheEnhancerAndSettingsStoreOnly.html"><span class="infusion-docs-TOC-pageName">Instantiating the Enhancer and Settings Store Only</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-prefsFramework/StylingThePreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Styling the Preferences Editor</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../to-do/AddingPrefsEditorToSite.html"><span class="infusion-docs-TOC-pageName">Adding a Basic Preferences Editor to a Site</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../to-do/WorkingWithPrefsEditorOnSite.html"><span class="infusion-docs-TOC-pageName">Working With A Preferences Editor On Your Site</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-prefsFramework/CreatingANewAdjusterUI.html"><span class="infusion-docs-TOC-pageName">Creating a New Adjuster UI</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-prefsFrameworkMinimalFootprint/MinimalFootprint.html"><span class="infusion-docs-TOC-pageName">Minimal Footprint</span></a>
                                                
                                            </li>
                                        
                                    </ul>
                                
                                    <span class="infusion-docs-sectionName">User Interface Options</span>
                                    <ul>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-userInterfaceOptions/UserInterfaceOptions.html"><span class="infusion-docs-TOC-pageName">Setting Up User Interface Options</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-userInterfaceOptions/WorkingWithUserInterfaceOptions.html"><span class="infusion-docs-TOC-pageName">Working with User Interface Options</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-userInterfaceOptions/UsingImagesInContrastModes.html"><span class="infusion-docs-TOC-pageName">Using Images in Contrast Modes</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-userInterfaceOptions/StyleEffectsAndLegibilityInContrastModes.html"><span class="infusion-docs-TOC-pageName">Style Effects and Legibility in Contrast Modes</span></a>
                                                
                                            </li>
                                        
                                            <li>
                                                
                                                    <a href="../tutorial-userInterfaceOptions/ContentPropertyHighContrast.html"><span class="infusion-docs-TOC-pageName">CSS &#x27;Content&#x27; Property in Contrast Modes</span></a>
                                                
                                            </li>
                                        
                                    </ul>
                                
                            
                        
                        
                            
                        
                        
                            
                        
                    
                </nav>

                <article id="content" class="infusion-docs-mainContent small-12 medium-9 column" tabindex="-1">
                    <div class="infusion-docs-articleContainer">

                        <div class="flc-toc-tocContainer infusion-docs-toc"> </div>

                        <h1>Developer Introduction to the Infusion Framework - Restructuring Components</h1>

                        <p class="infusion-docs-githubLink"><a href="https://github.com/fluid-project/infusion-docs/blob/master/src/documents/tutorial-developerIntroduction/DeveloperIntroductionToInfusionFramework-RestructuringComponents.md" target="_blank">Edit on GitHub</a></p>

                        

                        <div class="infusion-docs-articleBody">
                            
                                <p>Infusion's configuration-oriented components make it easier to restructure code, especially as a single component
configuration becomes unwieldy. It's a common and expected pattern in Infusion to refactor components as a design
evolves.</p>
<p>In the example below, we extract the two &quot;say hello&quot; components into separate component definitions from the main
component, then include them as subcomponents of the main component with their options appropriately configured. We'll
also add a listener to the main component to announce (once) when its creation is complete.</p>
<p>In the process, we'll be looking at some other important characteristics of Infusion component design:</p>
<ol>
<li>Building freestanding components, then wiring them together for more complex behaviours.</li>
<li>Overriding default component configuration when building up applications from separate components.</li>
</ol>
<div class="infusion-docs-note"><strong>Note:</strong> You can check out the <a
href="http://codepen.io/waharnum/pen/egBObY?editors=1111">Live Example of the code below on CodePen</a></div>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// The console hello functionality is now defined as a separate</span>
<span class="hljs-comment">// component</span>
fluid.defaults(<span class="hljs-string">"fluidTutorial.helloWorld.consoleHello"</span>, {
    <span class="hljs-attr">gradeNames</span>: [<span class="hljs-string">"fluid.modelComponent"</span>],
    <span class="hljs-comment">// We define a default message here so that</span>
    <span class="hljs-comment">// this component is fully independent and</span>
    <span class="hljs-comment">// could be used on its own</span>
    <span class="hljs-attr">model</span>: {
        <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello, Console World!"</span>
    },
    <span class="hljs-attr">modelListeners</span>: {
        <span class="hljs-attr">message</span>: <span class="hljs-string">"{that}.sayHello"</span>
    },
    <span class="hljs-attr">invokers</span>: {
        <span class="hljs-attr">sayHello</span>: {
            <span class="hljs-attr">funcName</span>: <span class="hljs-string">"fluidTutorial.helloWorld.consoleHello.sayHello"</span>,
            <span class="hljs-comment">// Here, "{that}" means the context of the current</span>
            <span class="hljs-comment">// component configuration (consoleHello)</span>
            <span class="hljs-attr">args</span>: [<span class="hljs-string">"{that}.model.message"</span>]
        }
    }
});

<span class="hljs-comment">// We'll update the name of the associated function at the same time.</span>
fluidTutorial.helloWorld.consoleHello.sayHello = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message</span>) </span>{
    <span class="hljs-built_in">console</span>.log(message);
};

<span class="hljs-comment">// The web page hello functionality is now defined as a separate component.</span>
fluid.defaults(<span class="hljs-string">"fluidTutorial.helloWorld.displayHello"</span>, {
    <span class="hljs-attr">gradeNames</span>: [<span class="hljs-string">"fluid.viewComponent"</span>],
    <span class="hljs-comment">// We define a default message here so that</span>
    <span class="hljs-comment">// this component is fully independent and</span>
    <span class="hljs-comment">// could be used on its own</span>
    <span class="hljs-attr">model</span>: {
        <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello, Web Page World!"</span>
    },
    <span class="hljs-attr">selectors</span>: {
        <span class="hljs-attr">messageArea</span>: <span class="hljs-string">".flc-messageArea"</span>
    },
    <span class="hljs-attr">modelListeners</span>: {
        <span class="hljs-attr">message</span>: <span class="hljs-string">"{that}.displayHello"</span>
    },
    <span class="hljs-attr">invokers</span>: {
        <span class="hljs-attr">displayHello</span>: {
            <span class="hljs-string">"this"</span>: <span class="hljs-string">"{that}.dom.messageArea"</span>,
            <span class="hljs-attr">method</span>: <span class="hljs-string">"html"</span>,
            <span class="hljs-attr">args</span>: [<span class="hljs-string">"{that}.model.message"</span>]
        }
    }
});

fluid.defaults(<span class="hljs-string">"fluidTutorial.helloWorld"</span>, {
    <span class="hljs-attr">gradeNames</span>: [<span class="hljs-string">"fluid.modelComponent"</span>],
    <span class="hljs-attr">model</span>: {
        <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello, World!"</span>
    },
    <span class="hljs-attr">listeners</span>: {
        <span class="hljs-string">"onCreate.announceSelf"</span>: {
            <span class="hljs-string">"this"</span>: <span class="hljs-string">"console"</span>,
            <span class="hljs-attr">method</span>: <span class="hljs-string">"log"</span>,
            <span class="hljs-attr">args</span>: [<span class="hljs-string">"The helloWorld Component is ready"</span>]
        }
    },
    <span class="hljs-attr">components</span>: {
        <span class="hljs-attr">consoleHello</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">"fluidTutorial.helloWorld.consoleHello"</span>,
            <span class="hljs-attr">options</span>: {
                <span class="hljs-attr">model</span>: {
                    <span class="hljs-attr">message</span>: <span class="hljs-string">"{helloWorld}.model.message"</span>
                }
            }
        },
        <span class="hljs-attr">displayHello</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">"fluidTutorial.helloWorld.displayHello"</span>,
            <span class="hljs-attr">container</span>: <span class="hljs-string">".helloWorld"</span>,
            <span class="hljs-attr">options</span>: {
                <span class="hljs-attr">model</span>: {
                    <span class="hljs-attr">message</span>: <span class="hljs-string">"{helloWorld}.model.message"</span>
                }
            }
        }
    }
});
</code></pre>
<p>We'll also create an instance of this component in a way that shows how any Infusion component defaults can be
overridden:</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-keyword">var</span> helloWorld = fluidTutorial.helloWorld({
    <span class="hljs-attr">model</span>: {
        <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello, restructured component world!"</span>
    }
});
</code></pre>
<p>Notice that the initial message is changed - an Infusion grade definition created by <code>fluid.defaults</code> is exactly that, a
default definition, and is fully extensible and reconfigurable even at runtime by passing in another block of
configuration.</p>
<p>Next: <a href="DeveloperIntroductionToInfusionFramework-OverridingInvokersAndRefactoring.html">Overriding Invokers and Refactoring</a></p>

                            
                        </div>
                    </div>

                    <footer class="row infusion-docs-footer">
                        <p class="infusion-docs-footerInfusion">Infusion is created by the <a href="http://fluidproject.org/" target="_blank">Fluid Project</a>,<br/>
                        a project of the <a href="http://idrc.ocad.ca/" target="_blank">Inclusive Design Research Centre</a> at <a href="http://www.ocadu.ca/" target="_blank">OCAD University</a>, funded by a grant from <a href="http://www.mellon.org/" target="_blank">The Andrew W. Mellon Foundation</a>.</p>
                    </footer>

                </article>

            </div>


        </div> <!-- end container -->
        <script>
            fluid.docs.onLoad();
            
                fluid.docs.search.mini(".docs-search-mini")
            
    </script>

    </body>

</html>
